ğŸ” Expert Review â€“ Tender_Kimi (FastAPI backend)
Commit checked: main @ 2024-07-28 18:00 UTC
Area	Observation	Severity	Fix / Suggestion
Project Structure	Clean separation (`app/api`, `app/services`, `tests`).	âœ… Good	Keep as-is.
Environment & Secrets	`.env.example` present, but no `.env` in `.gitignore`.	âš ï¸ Medium	Add `.env` to `.gitignore` immediately.
Pydantic Models	Uses `BaseModel` for request/response, but missing examples & field constraints.	â„¹ï¸ Low	Add `Field(example=..., description=...)` for auto-docs.
Error Handling	Generic `try/except` in `excel_parser.py`; returns 422 with string only.	âš ï¸ Medium	Create dedicated exception handlers: `HTTPException(status_code=422, detail={"loc": ..., "msg": ...})`.
File Upload Limits	`MAX_SIZE` hard-coded (5 MB).	â„¹ï¸ Low	Move to `settings.py` via `pydantic-settings` so ops can change w/o redeploy.
Async / CPU	`pandas.read_excel` is blocking.	ğŸ”´ High	Off-load to `asyncio.to_thread` or use `ProcessPoolExecutor` to avoid event-loop starvation.
Dockerfile	Multi-stage build is present, but final image still contains dev packages (`pytest`, etc.).	â„¹ï¸ Low	Use `--only=main` or split `requirements.txt` into `requirements-dev.txt`.
Tests	Basic pytest exists (upload + health), but no parameterized tests for multi-sheet or invalid files.	â„¹ï¸ Low	Add `@pytest.mark.parametrize` for edge cases (empty file, wrong extension, >5 MB).
CI/CD	GitHub Actions workflow uses `python:3.11-slim`, but does not cache pip.	â„¹ï¸ Medium	Add `actions/cache@v4` to cut build time (~40 s â†’ ~10 s).
CORS	Correctly configured for `localhost:5173` + Vercel.	âœ… Good	â€”
Rate Limiting	Missing.	âš ï¸ Medium	Plug `slowapi` or `fastapi-limiter` before going public.
Logging	Only default uvicorn logs.	â„¹ï¸ Low	Use `structlog` + JSON for production observability.
Security Headers	No `X-Content-Type-Options`, `X-Frame-Options`.	â„¹ï¸ Low	Add `fastapi-security-headers` middleware.
----
ğŸ”§ Quick Wins Checklist
â€¢  [ ] Add .env to .gitignore
â€¢  [ ] Wrap pandas.read_excel in asyncio.to_thread
â€¢  [ ] pip install slowapi â†’ @limiter.limit("5/minute") on upload route
â€¢  [ ] Add cache step in GitHub Actions yaml
â€¢  [ ] Split requirements â†’ requirements.txt vs requirements-dev.txt
â€¢  [ ] Create exception_handlers.py for consistent JSON errors
----
ğŸ¯ Next Merge Gate
1.  Fix async blocking call.
2.  Add rate limiter.
3.  Parameterized tests green.
After those three items, tag v0.2.0 and move to frontend work.
